# Demo 展示指南 - 台灣麻將專案

## 📋 目錄

1. [演示前準備](#演示前準備)
2. [快速啟動流程](#快速啟動流程)
3. [完整演示流程](#完整演示流程)
4. [技術亮點展示](#技術亮點展示)
5. [時間分配建議](#時間分配建議)
6. [常見問題應對](#常見問題應對)
7. [備用方案](#備用方案)

---

## 🎯 演示前準備

### 1. 環境檢查清單

#### 必要環境
- [ ] **Java 17** 已安裝並可用
  ```powershell
  java -version
  # 應顯示：java version "17.x.x"
  ```

- [ ] **Maven 3.6+** 已安裝並可用
  ```powershell
  mvn -version
  # 應顯示：Apache Maven 3.x.x
  ```

- [ ] **瀏覽器**已準備（Chrome/Firefox/Edge）
  - 建議使用 Chrome（相容性最佳）
  - 準備 4 個瀏覽器視窗或標籤頁

- [ ] **網路連線**正常（WebSocket 需要）

#### 專案檢查
- [ ] 專案已編譯（`target/classes` 目錄存在）
  ```powershell
  mvn clean compile
  ```

- [ ] 測試已執行並通過
  ```powershell
  mvn test
  # 應顯示：Tests run: 311, Failures: 0, Errors: 0
  ```

- [ ] 覆蓋率報告已生成
  ```powershell
  mvn jacoco:report
  # 報告位置：target/site/jacoco/index.html
  ```

### 2. 預先測試

**⚠️ 重要**：演示前務必完整測試一次！

#### 測試步驟
1. **啟動伺服器**
   ```powershell
   .\start.ps1
   # 或手動執行：
   # mvn exec:java -Dexec.mainClass="com.mahjong.server.MahjongWebSocketServer"
   ```

2. **開啟 4 個瀏覽器視窗**
   ```powershell
   # 方法 1：使用 PowerShell
   Start-Process "src\main\resources\web\index.html"
   Start-Process "src\main\resources\web\index.html"
   Start-Process "src\main\resources\web\index.html"
   Start-Process "src\main\resources\web\index.html"
   
   # 方法 2：手動開啟
   # 在檔案總管中前往 src\main\resources\web\
   # 雙擊 index.html 4 次
   ```

3. **測試連線**
   - 在 4 個視窗中分別輸入：Player1, Player2, Player3, Player4
   - 點擊 "Start Game"
   - 確認 4 位玩家都能連線

4. **測試基本功能**
   - 確認遊戲自動開始
   - 確認莊家有 17 張牌，閒家有 16 張牌
   - 測試出牌功能
   - 測試吃碰動作（如果可能）

### 3. 準備備用材料

- [ ] **測試結果截圖**（備用）
  - 測試執行結果（311 tests passed）
  - 覆蓋率報告截圖

- [ ] **程式碼截圖**（備用）
  - 關鍵類別結構
  - 測試檔案列表

- [ ] **架構圖**（如果有）

---

## 🚀 快速啟動流程

### Windows PowerShell 環境

#### 方法 1：使用啟動腳本（推薦）

```powershell
# 1. 設定執行政策（僅需執行一次）
Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process

# 2. 執行啟動腳本
.\start.ps1
```

#### 方法 2：手動執行

```powershell
# 1. 配置環境變數
$javaDir = "$env:USERPROFILE\DevelopmentTools\jdk-17"
$mavenDir = Get-ChildItem "$env:USERPROFILE\DevelopmentTools" -Directory | Where-Object { $_.Name -like "*maven*" } | Select-Object -First 1
$env:JAVA_HOME = $javaDir
$env:MAVEN_HOME = $mavenDir.FullName
$env:PATH = "$javaDir\bin;$($mavenDir.FullName)\bin;$env:PATH"

# 2. 停止舊進程
Get-Process -Name "java" -ErrorAction SilentlyContinue | Stop-Process -Force

# 3. 啟動伺服器
mvn exec:java -Dexec.mainClass="com.mahjong.server.MahjongWebSocketServer"
```

**成功標誌**：
```
Mahjong WebSocket Server started on port: 8888
```

### 開啟 4 個瀏覽器視窗

```powershell
# 在另一個 PowerShell 視窗執行
Start-Process "src\main\resources\web\index.html"
Start-Sleep -Seconds 1
Start-Process "src\main\resources\web\index.html"
Start-Sleep -Seconds 1
Start-Process "src\main\resources\web\index.html"
Start-Sleep -Seconds 1
Start-Process "src\main\resources\web\index.html"
```

---

## 🎮 完整演示流程

### 階段 1：系統介紹與連線（2-3 分鐘）

#### 1.1 專案概述（30 秒）

**口述重點**：
- "這是一個基於 WebSocket 的多人線上台灣麻將遊戲"
- "核心目標是展示軟體測試能力，而非遊戲性"
- "採用 Java 17 後端 + Web 前端架構"

#### 1.2 啟動伺服器（30 秒）

**操作**：
1. 開啟終端機
2. 執行啟動命令
3. 展示伺服器啟動訊息

**口述**：
- "我們使用 Maven 啟動 WebSocket 伺服器"
- "伺服器監聽 8888 端口"
- "採用 Java-WebSocket 庫實現即時通訊"

#### 1.3 開啟 4 個瀏覽器視窗（30 秒）

**操作**：
1. 開啟 4 個瀏覽器視窗
2. 展示前端介面

**口述**：
- "前端使用純 HTML5 + JavaScript，無需額外框架"
- "每個視窗代表一位玩家"
- "使用 WebSocket 實現即時狀態同步"

#### 1.4 玩家連線（1 分鐘）

**操作**：
1. 在 4 個視窗中分別輸入：Player1, Player2, Player3, Player4
2. 點擊 "Start Game"
3. 展示連線過程

**口述**：
- "4 位玩家分別連線到伺服器"
- "伺服器終端顯示連線狀態"
- "當第 4 位玩家連線後，遊戲自動開始"

**演示重點**：
- ✅ WebSocket 即時連線
- ✅ 多人同步機制
- ✅ 自動遊戲開始

---

### 階段 2：基本遊戲流程（3-4 分鐘）

#### 2.1 發牌階段（1 分鐘）

**操作**：
1. 展示每位玩家收到手牌
2. 展示手牌自動排序
3. 說明莊家與閒家的牌數差異

**口述**：
- "遊戲開始自動發牌"
- "每人 16 張，莊家額外摸 1 張變為 17 張"
- "手牌依照花色與數字自動排序"
- "這符合台灣麻將規則"

**演示重點**：
- ✅ 自動發牌邏輯
- ✅ 手牌排序功能
- ✅ 莊家特殊處理

#### 2.2 摸牌與出牌（1.5 分鐘）

**操作**：
1. 展示當前玩家（莊家）摸牌
2. 點擊手牌中的任意一張出牌
3. 展示出牌後手牌更新

**口述**：
- "當前玩家（東家/莊家）摸牌"
- "點擊手牌中的牌即可出牌"
- "出牌後手牌自動更新"
- "所有玩家都能看到出牌"

**演示重點**：
- ✅ 遊戲狀態同步
- ✅ 輪流機制
- ✅ 即時更新

#### 2.3 輪流機制（1 分鐘）

**操作**：
1. 展示輪到下一位玩家
2. 展示當前玩家高亮顯示
3. 展示逆時針輪流

**口述**：
- "遊戲採用逆時針輪流（東→南→西→北）"
- "當前玩家會高亮顯示"
- "所有玩家都能看到當前輪到誰"

**演示重點**：
- ✅ 狀態機管理
- ✅ 視覺化提示
- ✅ 多客戶端同步

---

### 階段 3：吃碰槓動作（4-5 分鐘）

#### 3.1 碰牌演示（1.5 分鐘）

**設置場景**：
- Player 1 出牌：`M1`（一萬）
- Player 2 手中有兩張 `M1`

**操作**：
1. Player 1 出 `M1`
2. Player 2 看到彈出視窗：`[PONG] [SKIP]`
3. 點擊 `PONG` 按鈕
4. 展示 Player 2 的牌減少 2 張，出現碰牌組合
5. 展示輪到 Player 2 出牌

**口述**：
- "當玩家出牌時，系統自動檢測其他玩家是否可執行動作"
- "Player 2 手中有兩張 M1，可以碰牌"
- "系統自動彈出動作選項"
- "執行碰牌後，牌面更新，輪到該玩家出牌"

**演示重點**：
- ✅ 自動動作檢測
- ✅ 動作優先級（碰 > 吃）
- ✅ 狀態同步

#### 3.2 吃牌演示（1.5 分鐘）

**設置場景**：
- Player 1 出牌：`M2`（二萬）
- Player 2（下家）手中有 `M1` 和 `M3`

**操作**：
1. Player 1 出 `M2`
2. Player 2 看到彈出視窗：`[CHOW] [SKIP]`
3. 點擊 `CHOW` 按鈕
4. 展示 Player 2 的牌減少 2 張，出現吃牌組合（M1, M2, M3）
5. 展示輪到 Player 2 出牌

**口述**：
- "吃牌只能吃上家的牌"
- "系統自動檢測是否可以組成順子"
- "執行吃牌後，牌面更新"

**演示重點**：
- ✅ 規則驗證（只能吃上家）
- ✅ 順子檢測
- ✅ 狀態同步

#### 3.3 槓牌演示（1 分鐘）

**設置場景**：
- 其他玩家出 `M4`
- 當前玩家手中有 3 張 `M4`

**操作**：
1. 展示可槓選項
2. 選擇槓牌
3. 展示補牌流程
4. 展示出牌提示

**口述**：
- "槓牌後需要從牌牆補一張牌"
- "補牌後可以立即出牌"
- "這展示了完整的動作流程"

**演示重點**：
- ✅ 槓牌邏輯
- ✅ 補牌機制
- ✅ 流程完整性

#### 3.4 動作優先級演示（1 分鐘）

**設置場景**：
- 同時有玩家可以「吃」和「碰」同一張牌

**操作**：
1. 展示動作選項
2. 說明優先級：胡 > 碰/槓 > 吃

**口述**：
- "當多個玩家可以執行不同動作時，系統會按照優先級處理"
- "胡牌優先級最高，其次是碰和槓，最後是吃"
- "這確保了遊戲規則的正確性"

**演示重點**：
- ✅ 優先級仲裁
- ✅ 規則正確性
- ✅ 系統穩定性

---

### 階段 4：胡牌判定（2-3 分鐘）

#### 4.1 自摸胡牌（1.5 分鐘）

**設置場景**（可預先準備）：
- 當前玩家手牌接近胡牌
- 摸到關鍵牌

**操作**：
1. 摸牌後，系統檢測到可胡牌
2. 彈出視窗：`[HU] [SKIP]`
3. 點擊 `HU` 按鈕
4. 展示遊戲結束，顯示獲勝者

**口述**：
- "系統使用回溯算法檢測手牌是否符合胡牌型"
- "標準胡牌是 4 組面子 + 1 對眼 = 14 張"
- "系統自動檢測並提示玩家"

**演示重點**：
- ✅ 胡牌演算法
- ✅ 自動檢測
- ✅ 遊戲結束機制

#### 4.2 點炮胡牌（1 分鐘）

**設置場景**：
- 其他玩家出牌
- 當前玩家可以胡牌

**操作**：
1. 展示動作選項
2. 選擇胡牌
3. 展示遊戲結束

**口述**：
- "當其他玩家出牌時，系統也會檢測是否可以胡牌"
- "多個玩家可以同時胡牌，看誰先選擇"

**演示重點**：
- ✅ 多人胡牌處理
- ✅ 優先級機制
- ✅ 遊戲結束判定

---

### 階段 5：測試覆蓋率展示（2-3 分鐘）

#### 5.1 執行測試（30 秒）

**操作**：
```powershell
# 在新終端機執行
mvn test
```

**展示內容**：
```
Tests run: 311, Failures: 0, Errors: 0, Skipped: 0
BUILD SUCCESS
```

**口述**：
- "我們有 311 個單元測試，全部通過"
- "測試數量遠超目標（目標 50+，實際 311）"
- "涵蓋核心邏輯、邊界條件、異常處理等"

#### 5.2 展示覆蓋率報告（1.5 分鐘）

**操作**：
```powershell
# 生成覆蓋率報告（如果尚未生成）
mvn jacoco:report

# 開啟報告
Start-Process "target\site\jacoco\index.html"
```

**展示內容**：
1. **整體覆蓋率**：
   - Branch Coverage: 80%
   - Line Coverage: 84%
   - Instruction Coverage: 84%

2. **核心邏輯覆蓋率**（com.mahjong.logic）：
   - Branch Coverage: 85% ✅
   - Line Coverage: 92% ✅
   - Instruction Coverage: 92% ✅

3. **各類別覆蓋率詳情**

**口述**：
- "整體 Branch Coverage 達到 80%"
- "核心邏輯（com.mahjong.logic）達到 85% Branch Coverage"
- "核心邏輯 Line Coverage 達到 92%"
- "這展示了我們對核心邏輯的完整測試"

**演示重點**：
- ✅ 測試完整性
- ✅ 覆蓋率分析
- ✅ 程式碼品質

#### 5.3 展示測試類別（30 秒）

**口述**：
- "我們有 21 個測試類別"
- "包括單元測試、整合測試、分支測試等"
- "涵蓋所有核心功能模組"

---

### 階段 6：技術亮點總結（1-2 分鐘）

#### 6.1 軟體度量指標

**展示數據**：
- **測試數量**：311 個（目標 50+，超標 522%）
- **總複雜度**：584（目標 > 200，超標 192%）
- **Branch Coverage**：80%（核心邏輯 85%）
- **Line Coverage**：84%（核心邏輯 92%）
- **Bug & Fix**：10 個案例

**口述**：
- "我們達成了所有關鍵指標"
- "測試覆蓋率極高，特別是核心邏輯"
- "通過 10 個 Bug 修復案例展示了測試方法的多樣性"

#### 6.2 架構設計

**口述**：
- "採用 MVC 架構，邏輯與 UI 分離"
- "使用 WebSocket 實現即時通訊"
- "所有核心邏輯都可以獨立測試"

#### 6.3 Bug 修復案例

**口述**：
- "我們記錄了 10 個 Bug 修復案例"
- "涵蓋 Critical、Major、Logic 等各類問題"
- "使用了多種測試方法：邊界值分析、等價分割、決策表測試等"

---

## 📊 時間分配建議

### 標準演示（15 分鐘）

| 階段 | 時間 | 重點 | 可縮減 |
|------|------|------|--------|
| 系統介紹與連線 | 2-3 分鐘 | 架構與連線 | 可縮至 1.5 分鐘 |
| 基本遊戲流程 | 3-4 分鐘 | 核心功能 | 可縮至 2 分鐘 |
| 吃碰槓動作 | 4-5 分鐘 | 複雜邏輯 | 可縮至 3 分鐘 |
| 胡牌判定 | 2-3 分鐘 | 演算法 | 可縮至 1.5 分鐘 |
| 測試覆蓋率 | 2-3 分鐘 | 測試能力 | **不可縮減** |
| 技術亮點總結 | 1-2 分鐘 | 總結 | 可縮至 1 分鐘 |
| **總計** | **14-20 分鐘** | | **10-12 分鐘（精簡版）** |

### 精簡演示（10 分鐘）

如果時間有限，可以：
1. **跳過部分遊戲流程**：只展示連線、發牌、一個動作（碰或吃）、測試覆蓋率
2. **預先準備場景**：提前設置好可以展示吃碰的牌型
3. **重點展示測試**：將更多時間放在測試覆蓋率展示

---

## ⚠️ 常見問題應對

### 問題 1：伺服器無法啟動

**症狀**：
```
Address already in use: bind
```

**解決方法**：
```powershell
# 停止所有 Java 進程
Get-Process -Name "java" -ErrorAction SilentlyContinue | Stop-Process -Force

# 等待 2 秒後重新啟動
Start-Sleep -Seconds 2
mvn exec:java -Dexec.mainClass="com.mahjong.server.MahjongWebSocketServer"
```

**預防措施**：
- 演示前先檢查並停止舊進程
- 準備備用端口（修改程式碼中的端口號）

---

### 問題 2：瀏覽器無法連線

**症狀**：
- 點擊 "Start Game" 後無反應
- 顯示連線失敗

**檢查項目**：
1. 確認伺服器已啟動（看到 `Server started on port: 8888`）
2. 確認瀏覽器開啟的是正確的 `index.html`
3. 確認沒有防火牆阻擋
4. 檢查瀏覽器控制台是否有錯誤訊息

**解決方法**：
- 重新啟動伺服器
- 重新整理瀏覽器頁面
- 檢查 WebSocket 連線狀態

---

### 問題 3：遊戲無法開始

**症狀**：
- 4 位玩家都已連線，但遊戲未開始

**原因**：
- 需要 4 位玩家才能開始遊戲
- 可能有玩家連線失敗

**解決方法**：
1. 檢查伺服器終端，確認 4 個連線都已建立
2. 重新整理所有瀏覽器頁面
3. 重新連線

---

### 問題 4：測試執行失敗

**症狀**：
```
Tests run: 311, Failures: 1, Errors: 0
```

**解決方法**：
```powershell
# 清理並重新編譯
mvn clean compile test

# 如果仍有問題，檢查具體失敗的測試
mvn test -Dtest=失敗的測試類別名稱
```

---

### 問題 5：覆蓋率報告無法開啟

**症狀**：
- `target/site/jacoco/index.html` 不存在

**解決方法**：
```powershell
# 重新生成報告
mvn clean test jacoco:report

# 確認報告已生成
Test-Path "target\site\jacoco\index.html"
```

**預防措施**：
- 演示前預先生成報告
- 準備報告截圖作為備用

---


---

## 🔄 備用方案

### 方案 1：純測試展示（5 分鐘）

如果遊戲無法運行，可以：
1. **展示測試結果**（1 分鐘）
   - 執行 `mvn test`
   - 展示 311 個測試全部通過

2. **展示覆蓋率報告**（2 分鐘）
   - 開啟覆蓋率報告
   - 說明各項指標

3. **展示程式碼結構**（1 分鐘）
   - 展示核心類別
   - 說明架構設計

4. **展示 Bug 修復案例**（1 分鐘）
   - 簡要說明 10 個 Bug 修復案例
   - 強調測試方法的多樣性

### 方案 2：截圖展示（3 分鐘）

如果無法現場執行，可以：
1. **展示預先準備的截圖**
   - 測試結果截圖
   - 覆蓋率報告截圖
   - 遊戲運行截圖

2. **口述說明**
   - 說明專案功能
   - 說明測試策略
   - 說明技術亮點

### 方案 3：程式碼展示（5 分鐘）

如果時間允許，可以：
1. **展示核心類別**（2 分鐘）
   - WinStrategy（胡牌演算法）
   - ActionProcessor（動作處理）
   - WebSocketGameSession（遊戲會話）

2. **展示測試類別**（2 分鐘）
   - 展示測試檔案結構
   - 展示測試案例範例

3. **說明設計模式**（1 分鐘）
   - MVC 架構
   - 依賴注入
   - 策略模式

---

## 📝 演示檢查清單

### 演示前一天

- [ ] 完整測試一次遊戲流程
- [ ] 執行所有測試並確認通過
- [ ] 生成覆蓋率報告
- [ ] 準備備用截圖
- [ ] 檢查環境設定
- [ ] 準備演示腳本（可選）

### 演示當天

- [ ] 提前 30 分鐘到達現場
- [ ] 檢查網路連線
- [ ] 測試伺服器啟動
- [ ] 測試瀏覽器連線
- [ ] 確認所有工具可用
- [ ] 準備備用方案

### 演示開始前

- [ ] 停止所有舊進程
- [ ] 確認環境變數設定
- [ ] 準備 4 個瀏覽器視窗
- [ ] 確認終端機視窗清晰可見
- [ ] 調整視窗大小和位置
